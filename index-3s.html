<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en">
<!--<![endif]-->

<head>
    <!-- Basic Page Needs -->
    <meta charset="utf-8">
    <title>Lucky phone number</title>
    <meta name="description" content="Is your phone number right for you? Or is it working against you? Lucky Phone Number analyzes your phone numbers and show you how lucky they are for you based on Feng Shui principles and algorithms." />
    <meta name="keywords" content="lucky, phone, number, feng, shui, principle, mobile" />
    <!-- Mobile Specific Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!-- CSS -->
    <link rel="stylesheet" href="stuff/main.css">
    <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <!-- Javascript -->
    <script src="jquery.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
</head>

<body onresize="onResize()" class="is-loading">
    <!-- Wrapper -->
    <div id="wrapper">
        <!-- Main -->
        <section id="main">
            <div id="mainHeader">
                <header>
                    <h1 style="font-weight:bold;">How lucky is your phone number?</h1>
                    <p></p>
                </header>
            </div>
            <div id="details">
                <form action="#" name="forma" id="theForm">
                    <div class="field">
                        <input type="tel" name="inpt" id="inputr" placeholder="Phone" style="font-size:1.5em; text-align:center" autocomplete="off" /> </div>
                    <ul class="actions">
                        <li><a href="#" class="button" type="button" onclick="suminp()">Analyze</a> </li>
                    </ul>
                </form>
            </div>
            <!-- Results -->
            <div id="results">
                <h6 id="pnumber"></h6>
                <p></p>
                <div id="prophecy0" class="props">
                    <h3>Destitute</h3>
                    <p>You probably often feel short of money. You need to get a new phone number.</p>
                </div>
                <div id="prophecy1" class="props">
                    <h3>Heaven</h3>
                    <p>It is good for Male's use.
                        <br>It makes a female more masculine. That may cause imbalance of Yin and Yang which could lead to disturbance in health or emotion.</p>
                </div>
                <div id="prophecy2" class="props">
                    <h3>Earth</h3>
                    <p>It is good for female's use.
                        <br>It makes a male indecisive or powerless.</p>
                </div>
                <div id="prophecy3" class="props">
                    <h3>Human</h3>
                    <p>It means that you have troublesome interpersonal relationships.</p>
                </div>
                <div id="prophecy4" class="props">
                    <h3>Wealth</h3>
                    <p>It means you have good fortune.</p>
                </div>
                <div id="prophecy5" class="props">
                    <h3>Help or Promotion</h3>
                    <p>It means you often have someone who helps and supports you in life. This could be a good boss, good customers, good friend, or even a stranger who gives you a hand when you're in need.</p>
                    <p>You have a lucky star shining upon your career endeavors.</p>
                </div>
                <div id="prophecyabove" class="props">
                    <h3>Variables</h3>
                    <p><b>The number exceeded the scope of analysis!</b> </p>
                    <p>It is a result of their extraordinary characteristics, usually celebrities, big shot, so lucky symbols could not thesis.</p>
                </div>
                <div id="pleaseenternumber" class="props">
                    <p><b>Please enter a phone number!</b> </p>
                </div>
                <br/> <a href="#" id="enterNew" class="button" type="button" onclick="resetStuff(); AdMob.showInterstitial(); ">Enter New Number</a> </div>
            <footer> </footer>
        </section>
        <!-- Footer -->
        <footer id="footer" style="font-size:0.8em;">
            <ul class="copyright">
                <li>&copy;
                    <script type="text/javascript">
                        document.write(new Date().getFullYear());
                    </script> Lucky Phone Number </li>
                <li><a href="http://luckyphonenumber.tk/privacy-policy.html">Privacy Policy</a></li>
            </ul>
        </footer>
    </div>
    <!-- essential for showing adMob Interstitial ads -->
    <div style="display:none">
        <input type='checkbox' id='autoshow' checked />auto show when ready
        <br />
        <div id='sizeinfo'></div>
    </div>
    <!-- END Ads -->
    <!-- End Document ================================================== -->
    <script>
        //BG Change
        function redBG() {
            "use strict"
        }

        function greenBG() {
            "use strict"
        }
        document.body.className += (navigator.userAgent.match(/(MSIE|rv:11\.0)/) ? ' is-ie' : '');
        //Post Contact
        function postContactToGoogle() {
            if (typeof myCity === "undefined") {
                window.myCity = "N/A";
            }
            if (typeof myCountry === "undefined") {
                window.myCountry = "N/A"
            }
            $.ajax({
                url: "https://docs.google.com/forms/d/1Z8MgUta_VEuQ7wSk80vAATiIuxrjEivdj6k6xqaTeyM/formResponse"
                , data: {
                    "entry_1233926493": $("#inputr").val()
                    , "entry_1330399588": finalTally
                    , "entry_276219161": myCountry
                    , "entry_1202517494": myCity
                    , "entry_1907319424": "Web"
                }
                , type: "POST"
                , dataType: "xml"
                , statusCode: {
                    0: function () {}
                , }
            });
        }
        //Sapangapat Pepentiping
        function resetStuff() {
            $("#inputr").val('');
            $("#main").css({
                'transform-origin': '50% 50%'
                , 'transform': 'none'
            });
            $("#mainHeader").slideDown("slow");
            $("#details").slideDown("slow");
            $("#results").slideUp("fast", function () {
                $(".props").hide();
            });
        }

        function ResultLook() {
            $("#main").css({
                'transform-origin': '50% 50%'
                , 'transform': 'rotateX(360deg)'
            });
            $("#mainHeader").slideUp("fast");
            $("#details").slideUp("fast");
            $("#results").slideDown("slow");
        }

        function suminp() {
            var phoneNumberRaw = $("#inputr").val();
            var phoneNumber = phoneNumberRaw.replace(/\D/g, "");
            //Start processForm
            function processForm() {
                while (phoneNumber.length > 2) {
                    var outp = 0
                    for (i = 0; i < phoneNumber.length; i++) {
                        outp = outp + parseInt(phoneNumber.charAt(i))
                    }
                    phoneNumber = outp + ""
                }
                window.finalTally = phoneNumber - (Math.floor(phoneNumber / 6) * 6);
                $("#prophecy" + finalTally).fadeIn("fast", function () {});
                ResultLook();
                $("#pnumber").hide().fadeIn(5000).replaceWith('<h6 id="pnumber"><em>' + 'Phone number' + ':' + '&nbsp' + $("#inputr").val() + '</em></h6>');
                if ((finalTally == 0) || (finalTally == 3)) {
                    redBG();
                }
            }
            //END Process Form
            if (phoneNumber == '') {
                alert("Please enter phone number");
            }
            else {
                processForm();
                postContactToGoogle();
            }
        }
        //KeyPress
        $(document).ready(function() {
            $("#results").hide();
            $(".props").hide();
            
            //critical for website to show
            document.body.className = document.body.className.replace(/\bis-loading\b/, '');
            
            //attach keypress to input
            $('#inputr').keydown(function (event) {
                // Allow special chars + arrows 
                if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || (event.keyCode == 65 && event.ctrlKey === true) || (event.keyCode >= 35 && event.keyCode <= 39)) {
                    return;
                }
                else {
                    // If it's not a number stop the keypress
                    if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105)) {
                        event.preventDefault();
                    }
                }
            });
            $('#inputr').keydown(function (e) {
                if (e.keyCode == 13) {
                    suminp();
                }
            });
            /*
            if (window.innerWidth < 480) {
                $("#inputr").focusin(function() {
                    $('#inputr').removeAttr("type");
                    $("#inputr").attr("type", "tel");
                });
            }
            */
            jQuery.ajax({
                url: 'http://freegeoip.net/json/'
                , type: 'POST'
                , dataType: 'jsonp'
                , success: function (location) {
                    window.myCity = location.city;
                    window.myCountry = location.country_name;
                    // example where I update content on the page.
                }
            });
        });
        //START Admob
        var admobid = {};
        if (/(android)/i.test(navigator.userAgent)) {
            admobid = { // for Android
                banner: 'ca-app-pub-3545086673654393/5969342403'
                , interstitial: 'ca-app-pub-3545086673654393/7166874008'
            };
        }
        else {
            admobid = { // for Windows Phone
                banner: 'ca-app-pub-3545086673654393/5969342403'
                , interstitial: 'ca-app-pub-3545086673654393/7166874008'
            };
        }
        //END Admob
        // Wait for Cordova to load
        //
        document.addEventListener("deviceready", onDeviceReady, false);
        // Cordova is ready
        //
        function onDeviceReady() {
            //iabRef = window.open('http://apache.org', '_blank', 'location=yes');
            //iabRef.addEventListener('loadstart', iabLoadStart);
            //iabRef.addEventListener('loadstop', iabLoadStop);
            //iabRef.addEventListener('exit', iabClose);
            
            $(document).on('click', 'a[href^=http], a[href^=https]', function (e) {
                e.preventDefault();
                var $this = $(this);
                var target = $this.data('inAppBrowser') || '_system';
                window.open($this.attr('href'), target, 'location=no');
            });
            if (AdMob) {
                AdMob.createBanner({
                    adId: admobid.banner
                    , position: AdMob.AD_POSITION.BOTTOM_CENTER
                    , autoShow: true
                });
                initAd();
                prepareInterstitial();
            }
        } //END-ondeviceready
        function prepareInterstitial() {
            var autoshow = document.getElementById('autoshow').checked;
            AdMob.prepareInterstitial({
                adId: admobid.interstitial
                , autoShow: true
            });
        }

        function onResize() {
            var s = document.getElementById('sizeinfo');
            s.innerHTML = "web view: " + window.innerWidth + " x " + window.innerHeight;
        }

        function initAd() {
            var defaultOptions = {
                // adSize: 'SMART_BANNER',
                // width: integer, // valid when set adSize 'CUSTOM'
                // height: integer, // valid when set adSize 'CUSTOM'
                position: AdMob.AD_POSITION.BOTTOM_CENTER
                , // offsetTopBar: false, // avoid overlapped by status bar, for iOS7+
                bgColor: 'black', // color name, or '#RRGGBB'
                // x: integer,      // valid when set position to 0 / POS_XY
                // y: integer,      // valid when set position to 0 / POS_XY
                isTesting: false, // set to true, to receiving test ad for testing purpose
                // autoShow: true // auto show interstitial ad when loaded, set to false if prepare/show
            };
            AdMob.setOptions(defaultOptions);
            registerAdEvents();
        }

        function registerAdEvents() {
            // new events, with variable to differentiate: adNetwork, adType, adEvent
            document.addEventListener('onAdFailLoad', function (data) {
                //alert('error: ' + data.error + 
                //      ', reason: ' + data.reason + 
                //      ', adNetwork:' + data.adNetwork + 
                //      ', adType:' + data.adType + 
                //      ', adEvent:' + data.adEvent); // adType: 'banner', 'interstitial', etc.
            });
            document.addEventListener('onAdLoaded', function (data) {});
            document.addEventListener('onAdPresent', function (data) {});
            document.addEventListener('onAdLeaveApp', function (data) {});
            document.addEventListener('onAdDismiss', function (data) {});
        }
        //On Load
        $(window).load(function () {
            setInterval(function () {
                AdMob.showInterstitial();
            }, 38000);
        });
    </script>
    <!-- Modal -->
    <!-- Start of StatCounter Code for Dreamweaver -->
    <script type="text/javascript">
        var sc_project = 9832759;
        var sc_invisible = 1;
        var sc_security = "be709236";
        var scJsHost = (("https:" == document.location.protocol) ? "https://secure." : "http://www.");
        document.write("<sc" + "ript type='text/javascript' src='" + scJsHost + "statcounter.com/counter/counter.js'></" + "script>");
    </script>
    <noscript>
        <div class="statcounter">
            <a title="web analytics" href="http://statcounter.com/" target="_blank"> <img class="statcounter" src="http://c.statcounter.com/9832759/0/be709236/1/" alt="web analytics"> </a>
        </div>
    </noscript>
    <!-- End of StatCounter Code for Dreamweaver -->
</body>

</html>